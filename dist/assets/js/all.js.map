{"version":3,"sources":["all.js"],"names":["ticketSetRow","document","querySelector","searchSselect","searchNum","addTicket","ticketName","pic","area","price","group","rate","description","myForm","data","axios","get","then","response","console","log","renderData","graphicObj","forEach","item","undefined","newData","Object","keys","arr","push","str","index","imgUrl","name","innerHTML","textContent","length","addEventListener","e","target","newArr","value","filter","obj","alert","id","reset","chart","c3","generate","bindto","columns","type","donut","title"],"mappings":"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","file":"all.js","sourcesContent":["const ticketSetRow = document.querySelector('.ticketSetRow')\nconst searchSselect = document.querySelector('.search-select')\nconst searchNum = document.querySelector('.searchNum')\nconst addTicket = document.querySelector('.addTicket')\nconst ticketName = document.querySelector('.name')\nconst pic = document.querySelector('.pic')\nconst area = document.querySelector('.area')\nconst price = document.querySelector('.price')\nconst group = document.querySelector('.group')\nconst rate = document.querySelector('.rate')\nconst description = document.querySelector('.description')\nconst myForm = document.querySelector('.myForm')\n\nlet data = {}\n\naxios.get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n  .then(function (response) {\n    data = response.data.data\n    console.log(data)\n    renderData(data)\n\n\n    //圖表製作\n    //先做一個篩選資料的物件\n    //沒辦法直接做成陣列，因為陣列會在forEach覆蓋前一筆資料\n    let graphicObj = {}\n    data.forEach(function (item) {\n      if (graphicObj[item.area] == undefined) {\n        graphicObj[item.area] = 1\n      } else {\n        graphicObj[item.area] += 1\n      }\n    })\n    console.log('graphicObj', graphicObj)\n\n    let newData = []\n    let area = Object.keys(graphicObj)\n    console.log('area', area)\n    area.forEach(function (item) {\n      let arr = []\n      arr.push(item)\n      arr.push(graphicObj[item])\n      console.log('arr', arr)\n      newData.push(arr)\n      console.log('newData', newData)\n    })\n\n\n\n  })\n\n//畫面渲染\nfunction renderData(data) {\n  let str = ''\n  data.forEach(function (item, index) {\n    str += `\n   <div class=\"col-4 mb-9\">\n        <div class=\"card shadow-sm position-relative h-100\">\n          <div class=\"card-area\">${item.area}</div>\n          <img src=\"${item.imgUrl}\" alt=\"...\">\n          <div class=\"card-body p-5 position-relative d-flex flex-column\">\n            <div class=\"rank\">8.6</div>\n            <h2 class=\"card-title text-primary fs-6 border-bottom mb-5 pb-1 border-primary border-3\">${item.name}</h2>\n            <p class=\"card-text text-secondary\">\n              ${item.description}\n            </p>\n            <footer class=\"d-flex justify-content-between text-primary align-items-center mt-auto\">\n              <div class=\"fs-4 d-flex\"> <span class=\"material-icons me-1\">\n                  error\n                </span>剩下最後${item.group}組</div>\n              <div class=\"fs-8 d-flex align-items-center\"><span class=\"fs-4 me-1\">TWD</span>$${item.price}</div>\n            </footer>\n          </div>\n        </div>\n      </div>\n   `\n  })\n  ticketSetRow.innerHTML = str\n  searchNum.textContent = `本次搜尋共 ${data.length}筆資料`\n}\n//搜尋套票\nsearchSselect.addEventListener('change', function (e) {\n  const target = e.target\n  let newArr = []\n  if (target.value === '地區搜尋') {\n    renderData(data.data)\n    searchNum.textContent = `本次搜尋共 ${data.data.length}筆資料`\n  } else {\n    newArr = data.data.filter(function (item) {\n      return item.area === target.value\n    })\n    // console.log(newArr)\n    renderData(newArr)\n  }\n\n\n\n})\n\n// 新增套票\naddTicket.addEventListener('click', function (e) {\n  const target = e.target\n  let obj = {}\n  if (ticketName.value === '' || pic.value === '' || area.value === '' || description.value === '' || group.value === '' || price.value === '' || rate.value === '') {\n    return alert('您有資料未填完整')\n\n  }\n  // console.log(ticketName.value)\n  obj.id = data.length + 1\n  obj.name = ticketName.value\n  obj.imgUrl = pic.value\n  obj.area = area.value\n  obj.description = description.value\n  obj.group = group.value\n  obj.price = price.value\n  obj.rate = rate.value\n  // console.log(obj)\n  data.data.push(obj)\n  renderData(data.data)\n  // ticketName.value, pic.value, area.value, description.value, group.value, price.value, rate.value = ''\n  myForm.reset()\n  searchSselect.value = '地區搜尋'\n})\n\n\n\n\n//插入圖表\nvar chart = c3.generate({\n  bindto: '#chart',\n  data: {\n    columns: newData,\n    type: 'donut',\n  },\n  donut: {\n    title: \"套票地區比重\"\n  }\n});\n"]}